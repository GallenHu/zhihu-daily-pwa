webpackJsonp([1],{"7Otq":function(t,e,n){t.exports=n.p+"static/img/logo.ff40a13.png"},"9/DF":function(t,e){},CFLA:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),i=n("mtWM"),s=n.n(i),c="https://zhihu-daily.leanapp.cn",o=function(){return s.a.get(c+"/api/v1/themes")},r=function(){return s.a.get(c+"/api/v1/last-stories")},l=function(t){return s.a.get(c+"/api/v1/contents/"+t)},u={name:"App",data:function(){return{isHome:!0,title:"知乎日报",isOpen:!1,isVisible:!1,menuList:[]}},beforeMount:function(){this.fetchThemes()},updated:function(){this.isHome="/home"===this.$route.path},methods:{toggle:function(){this.isOpen=!this.isOpen,this.isVisible=!this.isVisible},back:function(){this.$router.go(-1)},fetchThemes:function(){var t=this;o().then(function(e){t.menuList=e.data.THEMES&&e.data.THEMES.others})}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("header",{staticClass:"header"},[t.isHome?n("span",{staticClass:"header-menu",on:{click:function(e){t.toggle()}}}):n("span",{staticClass:"header-back",on:{click:function(e){t.back()}}}),t._v(" "),n("h1",[t._v(t._s(t.title))]),t._v(" "),n("span",{staticClass:"header-more"})]),t._v(" "),n("aside",{staticClass:"aside",class:{opened:t.isOpen,visible:t.isVisible},on:{click:function(e){t.toggle()}}},[n("div",{staticClass:"aside-content"},[t._m(0),t._v(" "),n("ul",[t._m(1),t._v(" "),t._l(t.menuList,function(e,a){return n("li",{key:a},[n("span",[t._v(t._s(e.name))])])})],2)])]),t._v(" "),n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view",{staticClass:"main"})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"aside-content-header"},[e("span",[e("img",{attrs:{src:n("7Otq"),alt:"Avatar"}})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("span",[this._v("首页")])])}]};var h=n("VU/8")(u,d,!1,function(t){n("zMps")},null,null).exports,p=n("/ocq"),m={name:"Home",data:function(){return{date:"",list:[],isHome:!0}},beforeMount:function(){this.fetchArticles()},methods:{fetchArticles:function(){var t=this;return r().then(function(e){t.date=e.data.STORIES&&e.data.STORIES.date,t.list=e.data.STORIES&&e.data.STORIES.stories})},go:function(t){this.$router.push({path:"article/"+t})}}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article"},t._l(t.list,function(e){return n("div",{key:e.id,staticClass:"article-card",on:{click:function(n){t.go(e.id)}}},[n("span",[n("img",{attrs:{src:e.images[0],alt:e.title}})]),t._v(" "),n("p",[t._v(t._s(e.title))])])}))},staticRenderFns:[]};var v=n("VU/8")(m,f,!1,function(t){n("CFLA")},"data-v-b15a6524",null).exports,g={name:"Article",data:function(){return{body:"",image:"",css:""}},beforeMount:function(){this.fetchContent()},updated:function(){var t=this;this.$nextTick(function(){t.addCss(t.css),document.querySelector(".article .img-place-holder").style="background-image: url("+t.image+")"})},methods:{fetchContent:function(){var t=this,e=this.$route.params.id,n="https://zhihu-daily.leanapp.cn/api/v1/contents/"+e;"caches"in window&&caches.match(n).then(function(e){console.log("[Cache] matched with: "+n),e&&e.json().then(function(e){console.log(e),t.css=e.data.CONTENTS.css[0],t.image=e.data.CONTENTS.image,t.image="https://images.weserv.nl/?url="+t.image.replace("https://",""),t.body=e.data.CONTENTS.body})}),l(e).then(function(e){t.css=e.data.CONTENTS&&e.data.CONTENTS.css[0],t.image=e.data.CONTENTS&&e.data.CONTENTS.image,t.image="https://images.weserv.nl/?url="+t.image.replace("https://",""),t.body=e.data.CONTENTS&&e.data.CONTENTS.body}).catch(function(e){console.log(e),t.body="<p>这是离线 mock 数据</p><p>这是离线 mock 数据</p><p>这是离线 mock 数据</p>"})},addCss:function(t){var e=document.querySelector(".article-content"),n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=t,e.appendChild(n)}}},_={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"article"},[e("div",{staticClass:"article-content",domProps:{innerHTML:this._s(this.body)}})])},staticRenderFns:[]};var C=n("VU/8")(g,_,!1,function(t){n("9/DF")},null,null).exports;a.a.use(p.a);var T=new p.a({routes:[{path:"/home",name:"Home",component:v},{path:"/article/:id",component:C},{path:"/",redirect:"/home"}]});a.a.config.productionTip=!1,new a.a({el:"#app",router:T,components:{App:h},template:"<App/>"})},zMps:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.45bdc6c99155b5cc82bf.js.map